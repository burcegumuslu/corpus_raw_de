{"title": "PDF", "author": "PDF", "url": "https://www.dbis.informatik.uni-goettingen.de/Teaching/DB-WS2021/db-ws2021-klausur-mit-lsg.pdf", "hostname": "PDF", "description": "PDF", "sitename": "PDF", "date": "PDF", "id": "PDF", "license": "PDF", "body": "PDF", "comments": "PDF", "commentsbody": "PDF", "raw_text": "PDF", "text": "Klausur Datenbanken\nWintersemester 2020/2021\nProf. Dr. Wolfgang May\n3. M\u00a8arz 2021, 11:15-12:30 Uhr\nBearbeitungszeit: 75 Minuten\n(Ilias-basierte Klausur)\nVorname:\nNachname:\nMatrikelnummer:\nZwecks besserer Lesbarkeit (insbesondere auch f \u00a8ur Nicht-{Mut/d/Va }tersprachler*innen)\nwird in der Aufgabenstellung auf gegenderte Sprache verzichtet.\n\u2022Im Folgenden wird die Aufgabenstellung beschrieben. F \u00a8ur das ER-Diagramm, und\nauch f\u00a8ur das relationale Schema ist ein Teil bereits vorgegeben. In den Auf gaben 1\nund 2 (wahlweise, ER-Diagramm) und 3 (Umsetzung in das relationale M odell)\nm\u00a8ussen nur noch die fehlenden Teile erg \u00a8anzt werden.\n\u2022Bearbeiten Sie zuerst entweder Aufgabe 1 oder 2 (ER-Diagramm), dann Aufgabe 3\n(Umsetzung indas RelationaleModell), und danndie weiteren Aufgabe n, die darauf\naufbauen.\nMax. Punkte Sch\u00a8atzung f\u00a8ur \u201c4\u201d\nAufgabe 1 (ER-Modell (Foto oder PDF-Upload) ) 12 10\nAufgabe 2 (ER-Modell (ASCII-Art-Modus) ) 0 0\nAufgabe 3 (Transformation in das Rel. Modell ) 4 3\nAufgabe 4 (Relationales Modell: CREATE TABLE) 4 3\nAufgabe 5 (Relationales Datenmodell: Nullwerte) 2 1\nAufgabe 6 (Anfragen (1) ) 6 6\nAufgabe 7 (Anfragen (2) ) 4 3\nAufgabe 8 (Anfragen (3) ) 4 2\nAufgabe 9 (Anfragen (4) ) 5 1\nAufgabe 10 (Anfragen (5) ) 8 3\nAufgabe 11 (Anfragen (wahlweise: B \u00a8aume als Upload) ) 0 0\nAufgabe 12 (Open Book \u2013 Open Web \u2013 Open Documentation) 4 0\nAufgabe 13 (Eine etwas kompliziertere SQL-Anfrage) 6 0\nAufgabe 14 (Geht das auch in der Algebra?) 2 1\nAufgabe 15 (Transaktionen 1: Single Choice ) 1 1\nAufgabe 16 (Transaktionen 2: Transaktionalit \u00a8at in ILIAS) 4 2\nSumme 66 36\nNote:Themenstellung: Corona-Impfung\nAlle Klausuraufgaben basieren auf einem gemeinsamen \u201cAuftrag\u201d: I n der Klausur soll\neine Datenbank f \u00a8ur die Verwaltung der Impfungen gegen Covid-19 entwickelt werden .\nDie Aufgabenstellung entspricht der Situation zu Zeitpunk t der Klausur im\nM\u00a8arz 2021, wo Impfungen ausschlie\u00dflich \u00a8uber Impfzentren organisiert wurden.\nIn Arztpraxen und von Betriebs \u00a8arzten wurde erst ab Mai 2021 geimpft.\n1. DieinDeutschlandlebenden Personensollengeimpftwerden. Zuje derPerson istder\nName (Vorname+Nachname), Geburtsdatum, eine eindeutige ID, A dresse (Stadt,\nPLZ, Stra\u00dfe und Hausnummer) und eine Telefonnummer gespeicher t. (In dieser\nKlausurbestehtdieIDzurVereinfachung immernurausdenInitialen derPersonen.)\nElsa M\u00a8uller(ID: EM) und Fritz M\u00a8uller(ID: FM), geboren am 4.3.1943 bzw. am\n3.4.1934 wohnen im Seniorenheim Habichtsweg 55, 37075 G \u00a8ottingen.\nMarkus Schmidt (ID:MS), geborenam 7.7.1977,wohnt im Kreuzbergring 1 in 37075\nG\u00a8ottingen. Er ist Altenp\ufb02eger.\n2. F\u00a8ur jede Person ist gespeichert, ob sie Arzt ist.\nDr. Robert Koch (ID:RK)istArzt,geborenam11.12.1983,undwohntinder Robert-\nKoch-Stra\u00dfe 1, 37073 G \u00a8ottingen.\nDr. Johann Faustus (ID: JF) ist Arzt, geboren am 29.2.1980, wohnt in der Goethe-\nstrasse 42, 37073 G \u00a8ottingen.\n3. Es gibt verschiedene Impfsto\ufb00e. Jeder Impfsto\ufb00 hat einen eind eutigen Namen. Au-\n\u00dferdem sind der Hersteller sowie die durchschnittliche Wirksamkeit na ch Studien,\ndasDatumder Zulassung in Deutschland, undggf. Alterseinschr \u00a8ankungen (von/bis)\nder zu impfenden Personen gespeichert. Es kann (in Zukunft) meh rere Impfsto\ufb00e\ndesselben Herstellers geben.\nDer Impfsto\ufb00 BNT162B2 des Herstellers Biontech hat eine Wirksamkeit von 95%,\nwurde am 21.12.2020 zugelassen, und ist f \u00a8ur Personen ab 16 Jahren empfohlen.\nDer Impfsto\ufb00 mRNA-1273 des Herstellers Moderna hat eine Wirksamkeit von 95%,\nwurde am 6.1.2021 zugelassen, und ist f \u00a8ur Personen ab 18 Jahren empfohlen.\nDer Impfsto\ufb00 AZD1222 des Herstellers Astra-Zeneca wurde am 29.01.2021 zugelas-\nsen und ist f \u00a8ur Personen im Alter von 18 bis 64 Jahren empfohlen.\n4. Impfzentren: jedes Impfzentrum hat einen Namen (z.B. \u201cG \u00a8ottingen I\u201d, \u201cG \u00a8ottin-\ngen II\u201d, \u201cUMG G \u00a8ottingen\u201d, \u201cHerzberg\u201d), eine Adresse ( Godehardstra\u00dfe 11, 37081\nG\u00a8ottingen;Anna-Vandenhoeck-Ring 13, 37081 G \u00a8ottingen;Robert-Koch-Stra\u00dfe 40,\n37075G\u00a8ottingen;Heidestra\u00dfe 10,37412 Herzberg amHarz ),undisteinemKreis(die\noben genannten alle dem Kreis G\u00a8ottingen) zugeordnet. Das Impfzentrum Northeim\nmit der Adresse Wolfshof 10, 37154 Northeim ist dem Kreis Northeim zugeordnet.\n5. F\u00a8ur jeden Kreis (= deutsche Verwaltungseinheit, entspricht distric t, county) ist der\nName,dieBev \u00a8olkerungszahl, undzuwelchemBundeslandergeh \u00a8ort,gespeichert.Der\nKreisG\u00a8ottingen hat 330000 Einwohner, der Kreis Northeim hat 130000 Einwohner,\nbeide geh \u00a8oren zum Bundesland Niedersachsen .\n16. In der zu entwerfenden Datenbank wird gespeichert, wann wiev iele Ampullen der\nImpsto\ufb00e an die einzelnen Kreise geliefert wurden. Z.B. wurden am 23 .12.2020 380\nAmpullen BNT162B2 an den Kreis G\u00a8ottingen und 195 Ampullen an den Kreis\nNortheim geliefert. Am 4.2.2021 wurden noch einmal 380 Ampullen BNT162B2 an\nden Kreis G\u00a8ottingen geliefert. Am 10.2.2021 wurden 200 Ampullen des Impfsto\ufb00s\nAZD1222 an den Kreis G\u00a8ottingen geliefert.\n7. Das Wesentliche an der Datenbank ist die Speicherung der einzelne n Impfungen:\n(dasistauchderTeilderDatenbank,derimER-ModellinAufgabe1e rg\u00a8anztwerden\nmuss.)\n\u2022jede Person kann (soll) zweimal (bisher \u00a8ublicherweise mit demselben Impfsto\ufb00)\ngeimpft werden. Weitere Impfungen k \u00a8onnen in den n \u00a8achsten Jahren folgen.\n\u2022JedeeinzelneImpfungistverwaltungstechnisch (undlogistisch) ein emImpfzen-\ntrum zugeordnet. Die Impfungen einer Person k \u00a8onnen aber an verschiedenen\nOrten durchgef \u00a8uhrt werden:\n\u2022P\ufb02egebed \u00a8urftige Personen, die in Seniorenheimen wohnen, werden in diesen\ngeimpft.\n\u2022P\ufb02egebed \u00a8urftige Personen, die zuhause wohnen, k \u00a8onnen zuhause geimpft wer-\nden.\n\u2022alle anderen werden in dem jeweiligen Impfzentrum geimpft.\n\u2022Vor der Impfung muss immer erst ein Termin vereinbart werden, der in der\nDatenbank abgelegt wird (Person, wann (Datum+Uhrzeit), bei we lchem Impf-\nzentrum, ggf. abweichende Heimadresse),\n\u2022nach der Impfung wird dazu gespeichert, mit welchem Impfsto\ufb00 und von wel-\nchem Arzt geimpft wurde.\n\u2022Elsa M\u00a8uller(ID: EM) und Fritz M\u00a8uller(ID: FM) wurden in ihrem Senioren-\nheim am 28.12.2020 um 14:30 Uhr bzw. 14:40 Uhr von Dr. Johann Faustus\nmit dem Impfsto\ufb00 BNT162B2 geimpft. Diese Impfungen sind dem Impfzen-\ntrumG\u00a8ottingen I zugeordnet.\n\u2022Die zweite Impfung des Ehepaars M \u00a8uller erfolgte am 8.2.2021 um 10:00 Uhr\nbzw. 10:10 Uhr im Seniorenheim durch Dr. Robert Koch mitBNT162B2 . Auch\ndiese Impfungen sind dem Impfzentrum G\u00a8ottingen I zugeordnet.\n\u2022Markus Schmidt wurde am15.2.2021um9:30 imImpfzentrum G\u00a8ottingen I von\nDr. Johann Faustus mit den Impfsto\ufb00 AZD1222 geimpft.\nEr hat schon einen Termin f \u00a8ur die zweite Impfung am 10.3.2021 um 10:00,\nwieder im Impfzentrum G\u00a8ottingen I .\n8. Nebenwirkungen/Komplikationenwerdenebenfallserfasst.Meh rwirdandieserStel-\nle dazu nicht gesagt.\nDie entsprechende Tabelle (mit Beispieltupeln) ist in Aufgabe 3 im relatio nalen\nSchema angegeben.\n2Aufgabe 1 (ER-Modell (Foto oder PDF-Upload) [12 Punkte])\nVervollst\u00a8andigen Sie das angegebene ER-Modell (einschl. Kardinalit \u00a8aten):\n(d.h. machen Sie eine eigene Gra\ufb01k(z.B. mit draw.io) inder Sie von dem vo rhandenen nur\ndie ben\u00a8otigten Entit \u00a8atstypen (ohne deren Attribute) \u201cneu\u201d zeichnen und das Gesuch te\ndazwischenf \u00a8ugen, oder kopieren Sie das untenstehende ER-Diagramm in ein Zeich enpro-\ngramm und malen rein ... oder verwenden ein Blatt Papier+Smartphone .)\n\u2022Modellieren Sie die Daten zu den Impfungen wie oben beschrieben (8 P)\n\u2022Modellieren Sie die Daten zu den Nebenwirkungen wie im Text und in der Ta belle\nzu Aufgabe 3 beschrieben (4 P)\n\u2022Wenn Sie die ER-Modell-Aufgabe als pdf/png/jpg- oder Foto- Upload\nbearbeiten wollen, machen Sie dies HIER,\n\u2022wenn Sie die Aufgabe stattdessen als ASCII-Art im Editor bea rbeiten\nwollen, machen Sie dies in Aufgabe 2.\nPerson Impfung\nArzt Impfzentrum Impfsto\ufb00\nNebenwirkung Kreiss\nin<1,1>\n<0,\u2217>geliefert<0,\u2217>\n<0,\u2217>geimpft <0,\u2217> <1,1>\nimpft\n<0,\u2217><0,1>\nbei\n<0,\u2217><1,1>\nmit\n<0,\u2217><0,1>\nhat\n<1,1><0,\u2217>idnamegebdat\nadresse\nstadt\nplztelefon\nname\nHerstellervon\nbis\nwirksamk\nzulaDatname\nadresse\nname Bundesland\nbevoelkerungdatum\nuhrzeit\nadresse\ndatum\nbeschreibung gefahrdatum\nanzahl\nL\u00a8osung\nEine naheliegende L \u00a8osung ist obenstehend eingezeichnet.\nDie Nebenwirkungen sollte man nicht mit \u201cImpfung\u201d sondern m it der Person verbinden. Das\nDatum der Nebenwirkungen Impfung, liegt h \u00a8au\ufb01g sp\u00a8ater als das Datum der Impfung. \u00a8Uber die\nPerson l\u00a8asst sich dann aber heraus\ufb01nden, zu welcher Impfung die Nebe nwirkungen geh \u00a8oren.\n\u2022Punkte f\u00a8ur Impfung:\nals weak: 2P richtig angebunden, 4 (8 St \u00a8uck) Kardinalit \u00a8aten, 1 weak+id, 1 key\nals Beziehung: 4 richtig angebunden, 4 Kardinalit \u00a8aten\n3\u2022Punkte f\u00a8ur Nebenwirkungen:\n1 richtig angebunden, 1 Kardinalit \u00a8aten, 1 weak+id, 1 keys\nMan kann anstatt des (schwachen) Entit \u00a8atstyps \u201cImpfung\u201d auch eine Beziehung \u201cgeimpft\u201d\nmodellieren. Dann kann man allerdings keine Schl \u00a8usselbedingungen, und auch die Mindestkar-\ndinalit\u00a8aten bzw. erlaubter nulls von geimpft nicht mehr angeben. Ei ne solche Instanz darf nur\nexistieren, wenn Person+Impfzentrum feststehen, Person u nd Datum ist key, und Arzt und\nImpfsto\ufb00 d \u00a8urfen null sein.\nDies ist eine Beispiel f \u00a8ur Rei\ufb01kation einer mehrstelligen Beziehung: Das \u201cimpfen\u201d ist eine\nBeziehung zwischen einer Person, einemArzt, einemImpfzen trumund einemImpfsto\ufb00.Daraus\nwird \u2013auch in der Realwelt\u2013 der Entit \u00a8atstyp \u201cImpfung\u201d gebildet. Umgekehrt kann man den\nrei\ufb01zierten Entit \u00a8atstyp \u2013unter Verlust von Genauigkeit in den Kardinalit \u00a8aten und Schl \u00a8usseln\u2013\nauch de-rei\ufb01zieren und als Beziehung modellieren.\nWenn man z.B. doch die Nebenwirkungen direkt zu einer Impfung assoziieren wollte, geht das\nnur sauber wenn die Impfung selber ein Entit \u00a8atstyp ist.\nUnabh\u00a8angig von der Modellierung ist die daraus abgeleitete Tabel le im Relationalen Modell\n(Aufgabe 3) dieselbe.\nPerson geimpft\nArzt Impfzentrum Impfsto\ufb00datum uhrzeit\nadresse<0,2>\n<0,\u2217> <0,\u2217><0,\u2217>\nEin Entwurf, der \u201cTermin\u201d und \u201cImpfung\u201d in zwei Entit \u00a8atstypen trennt, erlaubt eine sehr\nexakte Modellierung bzgl. der (Mindest)kardinalit \u00a8aten:\nPerson Termin Impfung\nImpfzentrum Impfsto\ufb00 Arztdatumuhrzeit\nadresse\nhat<0,\u2217> <1,1>\nin\n<0,\u2217><1,1>zu <0,1> <1,1>\nimpft\n<0,\u2217><1,1>\nmit\n<0,\u2217><1,1>\nEtwas reduziert kann man auch hier die \u201cImpfung\u201d de-rei\ufb01zie ren:\nPerson Termin geimpft\nImpfzentrum Impfsto\ufb00 Arztdatumuhrzeit\nadresse\nhat<0,\u2217> <1,1>\nin\n<0,\u2217><1,1><0,1>\n<0,\u2217><0,\u2217>\n4Aufgabe 2 (ER-Modell (ASCII-Art-Modus) [0 Punkte])\nAlternativ zu Aufgabe 1 k \u00a8onnen Sie dasselbe hier als ASCII-Art im Editor bearbeiten. So\netwa so:\n[Entity]---<0,1>---<<ident-beziehung>>---<1,1>---[[ weakEnt]]-(attr)\n\\ |\n(_key_attr) (_keyattr_)\nAufgabe 3 (Transformation in das Rel. Modell [4 Punkte])\nVervollst\u00a8andigen Sie in dieser Aufgabe das unten angegebene relationale Mode ll:\nGeben Sie die Tabelle(n) (mit Attributen, Schl \u00a8usseln, Fremdschl \u00a8usseln etc.) f \u00a8ur die Imp-\nfungen mit jeweils mindestens zwei Beispieltupeln (z.B. welche, die sich aus dem Aufga-\nbentext ergeben) an.\nGeben Sie hier kein SQL CREATE TABLE -Statement, sondern entsprechend \u201cASCII-Art\u201d\nPseudocode an. (Empfehlung: editieren Sie es in einer lokalen Datei u nd kopieren es am\nEnde ins Ilias, dann k \u00a8onnen Sie Ihre lokale Datei zur Bearbeitung der SQL-Aufgabenauc h\nsehen).\n\u2022Die Tabellenskizze kann z.B. so aussehen:\ntabname(_attr1_,_attr2_,attr3, attr4)\n------------------------------------\nbsp11 bsp12 bsp13 bsp14\nbsp21 bsp22 bsp23 bsp24\noder analog\nrelname(attr1,attr2,attr3,attr4) Primary Key: (attr1,a ttr2)\n\u2022Angabe von Fremdschl \u00a8usselreferenzen z.B. so:\nrel1(A,B) -> rel2(X,Y)\n5Person\nidName GebDatum Adresse Stadt PLZTel.Arzt\nEMElsa M\u00a8uller 4.3.1943 Habichtsweg 55 G\u00a8ottingen 37075...0\nFMFritz M\u00a8uller 3.4.1934 Habichtsweg 55 G\u00a8ottingen 37075...0\nMSMarkus Schmidt 7.7.1977 Kreuzbergring 1 G\u00a8ottingen 37075...0\nRKRobert Koch 11.12.1983 Robert-Koch-Str. 1 G\u00a8ottingen 37073...1\nJFJohann Faustus 29.2.1980 Goethestrasse 42 G\u00a8ottingen 37073...1\n:: : : : :::\nImpfsto\ufb00\nName Hersteller Wirksamkeit Zulassungsdatum AlterVon AlterBis\nBNT162B2 BionTech/P\ufb01zer 95 21.12.2020 16 NULL\nmRNA-1273 Moderna 95 06.01.2021 18 NULL\nAZD1222 Astra-Zeneca NULL 29.01.2021 18 64\nSputnik V Gamaleja 91 NULL NULL NULL\n: : : : : :\nKreis\nName Bev\u00a8olkerung Bundesland\nG\u00a8ottingen 330000 Niedersachsen\nNortheim 130000 Niedersachsen\n: : :geliefert (Keys/Foreign Keys fehlen!)\nImpfsto\ufb00 Kreis Datum Anzahl\nBNT162B2 G\u00a8ottingen 23.12.2020 380\nBNT162B2 Northeim 23.12.2020 190\nBNT162B2 G\u00a8ottingen 4.2.2021 380\nAZD1222 G\u00a8ottingen 10.2.2021 200\n: : :\nImpfzentrum\nName Strasse PLZStadt Kreis\nG\u00a8ottingen I Godehardstra\u00dfe 11 37081G\u00a8ottingen G\u00a8ottingen\nG\u00a8ottingen II Anna-Vandenhoeck-Ring 13 37081G\u00a8ottingen G\u00a8ottingen\nUMG G\u00a8ottingen Robert-Koch-Stra\u00dfe 40 37075G\u00a8ottingen G\u00a8ottingen\nNortheim Wolfshof 10 37154Northeim Northeim\n: : :: :\nNebenwirkungen (Keys fehlen!)\nPerson Datum Beschreibung Gef\u00a8ahrlichkeit\nFM 01.01.2021 Kopfschmerzen 1\nMS 15.02.2021 \u00a8Ubelkeit 1\nMS 16.02.2021 \u00a8Ubelkeit 1\nMS 16.02.2021 Fieber 39 Grad 3\nMS 16.02.2021 Schttttttelfrost 3\n: : : :\n6L\u00a8osung\nImpfung\nPersonDatum Uhrzeit Impfzentrum Impfsto\ufb00 ArztAdresse Stadt PLZ\nEM28.12.2020 14:30 G\u00a8ottingen I BNT162B2 JFHabichtsweg 55 G\u00a8ottingen 37075\nFM28.12.2020 14:40 G\u00a8ottingen I BNT162B2 JFHabichtsweg 55 G\u00a8ottingen 37075\nEM8.2.2021 10:00 G\u00a8ottingen I BNT162B2 RKHabichtsweg 55 G\u00a8ottingen 37075\nFM8.2.2021 10:10 G\u00a8ottingen I BNT162B2 RKHabichtsweg 55 G\u00a8ottingen 37075\nMS15.2.2021 9:30 G\u00a8ottingen I BNT162B2 JFNULL NULL NULL\nMS10.3.2021 10:00 G\u00a8ottingen I NULL NULLNULL NULL NULL\n:: : : : :: : :\nFKs: (Person) \u2192Person(id), (Arzt) \u2192Person(id),\n(Impfzentrum) \u2192Impfzentrum(Name), (Impfsto\ufb00) \u2192Impfsto\ufb00(Name)\nKey: 1P 4FKs je 1/2P Rest/richtige Attribute 1P\nAnmerkungen: hier waren nur die Tabellen f \u00a8ur die Impfungen gefragt.\nDie in der Aufgabenstellung nicht angegebenen Schl \u00a8usselattribute f \u00a8ur \u201cgeliefert\u201d werden ja\ngleich in der n \u00a8achsten Aufgabe behandelt.\nAufgabe 4 (Relationales Modell: CREATE TABLE [4 Punkte])\nGeben Sie das CREATE TABLE -Statement f \u00a8ur die oben angegebene \u201cgeliefert\u201d-Tabelle so\nvollst\u00a8andig wie m \u00a8oglich an, d.h., bestimmen Sie auch die Schl \u00a8ussel und Fremdschl \u00a8ussel.\nL\u00a8osung\nCREATE TABLE geliefert 1P\n(Impfstoff VARCHAR2(20) REFERENCES Impfstoff(name), 1/2 P\nKreis VARCHAR2(20) REFERENCES Kreis(name), 1/2\nDatum DATE CHECK Datum BETWEEN 01.12.2020 AND SYSDATE, +1/2 wer dran denkt\nAnzahl NUMBER NOT NULL CHECK (Anzahl > 0), 1/2+1/2\nPRIMARY KEY (Impfstoff, Kreis, Datum)) 1 P\nWenn man mit der Begr \u00a8undung \u201ces k \u00a8onnten ja an einem Tag mehrere Lieferungen desselben\nImpfsto\ufb00s an ein Impfzentrum geliefert werden\u201d auch die Anz ahl mit in dem PRIMARY KEY\nnimmt, bringt das eher wenig. Die Anzahl wird meistens die in einem oder zwei Kartons\nenthaltene Menge sein, also auch oft dieselbe. Dann m \u00a8usste man eher noch die Uhrzeit (aber\nwelche?) dazunehmen.\nAus der Aufgabenstellung geht hervor, dass jeweils die Zahl f\u00a8ur den gesamten Tag gemeint\nist.\nAufgabe 5 (Relationales Datenmodell: Nullwerte [2 Punkte] )\nWas bedeutet der Wert NULL in der 3. Spalte der Tabelle \u201cImpfsto\ufb00e \u201d f\u00a8ur den Astra-\nZeneca-Impfsto\ufb00?\nL\u00a8osung Der dort genau hingeh \u00a8orende Wert f \u00a8ur Wirksamkeit existiert (und ist ausreichend\nhoch, sonst w \u00a8are es ist nicht bekannt), aber es kann/soll kein konkreter W ert angegeben\nwerden (es gab verschiedene Studien, die u.a. auf 62%, 70%, 82 % und 90% kamen).\nDie Antwort \u201cda ist kein Wert eingetragen\u201d ist zu platt. Es ge ht darum, was dieser Nullwert\nbedeutet: \u201cgibt es, aber nicht eingetragen\u201d, z.B. im Gegensa tz zu den Nullwerten in der\n4. und 6. Spalte , \u201cWert existiert nicht, bedeutet bisher nic ht zugelassen\u201d, \u201ces gibt keinen\nWert (Altersobergrenze)\u201d.\n7Aufgabe 6 (Anfragen (1) [6 Punkte])\nVerwenden Sie f \u00a8ur diese und die folgenden Aufgaben die von Ihnen vervollst \u00a8andigte rela-\ntionale Datenbasis. Keine der Antworten soll Duplikate enthalten.\nGeben Sie eine SQL-Anfrage undeinen Ausdruck oder Baum der relationalen Algebra an,\ndie die Namen aller Landkreise zur \u00a8uckgibt, in denen vor dem 1.1.2021 mindestens eine\nPerson, die nach dem 1.1.1960 geboren wurde, geimpft wurde.\nSie k\u00a8onnen wahlweise beides zusammen im untenstehenden Texteingabef eld eingeben,\noder den Algebra-Baum in Aufgabe 11 als Gra\ufb01k oder Foto hochladen .\nFallsSie den Algebra-Ausdruck/Baum hier eingeben wollen, schreiben Siepseudocode mit\npi[...](...), sigma[...](...), join(...,...), etc.\nL\u00a8osung\nSELECT DISTINCT kreis\nFROM Person p, Impfung i, Impfzentrum j\nWHERE p.id = i.person\nAND i.impfzentrum = j.name\nAND i.Datum < \u201901.01.2021\u2019\nAND p.gebDat > \u201901.01.1960\u2019\nAND arzt IS NOT NULL (+1/2P wer daran dachte)\n\u03c0[kreis]\n\u22b2\u22b3\n\u22b2\u22b3\n\u03c1[name\u2192impfzentrum ]\nImpfzentrum\u03c0[person,impfzentrum ]\n\u03c3[datum<\u201901.01.2021\u2019\narzt is not null ]\nImpfung\u03c1[id\u2192person]\n\u03c3[gebDat>\u201901.01.1960\u2019 ]\nPerson\n(Aufpassen: \u201cPerson\u201d und \u201cImpfzentrum\u201d haben beide eine Sp alte \u201cStadt\u201d, die darf beim\nnat\u00a8urlichen Join nicht dabei sein; Impfung.Adresse ist meisten s dieselbe wie Person.Adresse,\noder null, das ist nur ein Problem, wenn die Person inzwische n umgezogen ist.)\npi[Kreis](\nnatjoin(\nnatjoin(rho[id->person](sigma[gebDat > \u201901.01.1960\u2019]( person)),\npi[person,impfzentrum](\nsigma[Datum < \u201901.01.2021\u2019](Impfung))\nrho[name->impfzentrum](Impfzentrum)))\nAufgabe 7 (Anfragen (2) [4 Punkte])\nGeben Sie eine SQL-Anfrage an, die f \u00a8ur jeden Kreis angibt, wieviele Impfungen bisher\nvon den Impfzentren des Kreises durchgef \u00a8uhrt wurden.\nL\u00a8osung\n8SELECT Kreis, COUNT(*)\nFROM Impfung i, Impfzentrum j\nWHERE i.impfzentrum = j.name\nAND Arzt IS NOT NULL -- Impfung wurde durchgefuehrt\n-- DATUM < SYSDATE kann eine nicht erledigte abgesagte Karte ileiche sein!\nGROUP BY Kreis\n(wenn jemand daran dachte, (kreis,0) dazuzunehmen, wenn dor t noch nicht geimpft wurde\n+1)\nAufgabe 8 (Anfragen (3) [4 Punkte])\nGeben Sie eine SQL-Anfragean, die die Namen aller Impfzentren ausg ibt, von denen noch\nkeine Person mit dem Impfsto\ufb00 \u201cmRNA-1273\u201d geimpft wurde.\nL\u00a8osung\nSELECT name\nFROM Impfzentrum i\nWHERE NOT EXISTS\n(SELECT *\nFROM Impfung j\nWHERE j.Impfzentrum = i.name\nAND Impfstoff = \u2019mRNA-1273\u2019)\n(Der Aspekt \u201cschon geimpft\u201d wurde hier nicht nochmal bewert et, da er beim GROUP BY\nschon explizit dabei war, und die Aufgabenstellung davon au sgeht, dass Impfsto\ufb00 nur ungleich\nNULL ist, wenn schon geimpft wurde)\nAufgabe 9 (Anfragen (4) [5 Punkte])\nGebenSieeinenAlgebra-Ausdruck oderBauman,derdieAnfrageau sdervorhergehenden\nAufgabe beantwortet.\nSie k\u00a8onnen den Baum wahlweise hier (als ASCII-Art im Editor) abgeben, od er in Aufgabe\n11 als Gra\ufb01k oder Foto hochladen.\nL\u00a8osung\nminus\n/ \\\nrho[name->impfzentrum] pi[impfzentrum]\npi[name] sigma[Impfstoff = \u2019mRNA-1273\u2019]\nImpfzentrum Impfung\nAufgabe 10 (Anfragen (5) [8 Punkte])\nWelche der folgenden Algebra-B \u00a8aume und SQL-Anfragen beantworten die Anfrage \u201cdie\nNamen aller Kreise, an die alle bisher zugelassenen Impfsto\ufb00e mindest ens einmal geliefert\nwurden\u201d korrekt?\n(es k\u00a8onnen mehrere B \u00a8aume und SQL-Anfragen richtig sein)\n1. \u2013\n9SELECT name\nFROM kreis k\nWHERE ALL\n(SELECT impfstoff FROM Impstoff i\nWHERE zugelassen IS NOT NULL)\nIN (SELECT impfstoff, kreis FROM geliefert)\n2./check\nSELECT name\nFROM kreis k\nWHERE NOT EXISTS\n(SELECT *\nFROM Impstoff i\nWHERE zugelassen IS NOT NULL\nAND (i.name, k.name) NOT IN\n(SELECT impfstoff, kreis FROM geliefert)\n3. \u2013\nSELECT name\nFROM kreis k\nWHERE name NOT IN\n(SELECT k.name\nFROM ((SELECT impfstoff, kreis\nFROM geliefert)\nMINUS\n(SELECT i.name, k.name\nFROM impfstoff i, kreis k\nWHERE i.zugelassen IS NOT NULL)))\n4./check\n\u03c0[kreis]\n\u00f7\n\u03c0[impfsto\ufb00,kreis ]\ngeliefert\u03c0[impfsto\ufb00]\n\u03c1[name\u2192impfsto\ufb00]\n\u03c3[zugelassen IS NOT null ]\nImpfsto\ufb00\n105. \u2013\n\u00f7\n\u03c1[name\u2192kreis]\n\u03c0[name]\nkreis\u22b2\u22b3\ngeliefert \u03c0[impfsto\ufb00]\n\u03c1[name\u2192impfsto\ufb00]\n\u03c3[zugelassen IS NOT null ]\nImpfsto\ufb00\n6. \u2013\nSELECT name\nFROM kreis\nWHERE EXISTS\n(SELECT *\nFROM impfstoff i, kreis k\nWHERE i.zugelassen IS NOT NULL)\nAND name NOT IN\n(SELECT * FROM geliefert WHERE impfstoff != i)\n7./check\nminus\n\u03c1[name\u2192kreis]\n\u03c0[name]\nkreis\u03c0[kreis]\nminus\n\u22b2\u22b3\n\u03c1[name\u2192kreis]\n\u03c0[name]\nKreis\u03c1[name\u2192impfsto\ufb00]\n\u03c0[name]\n\u03c3[zugelassen IS NOT null ]\nImpfsto\ufb00\u03c0[impfsto\ufb00,kreis ]\ngeliefert\n8./check\nSELECT name\nFROM kreis\nWHERE name NOT IN\n(SELECT kreis\nFROM ((SELECT i.name as impfstoff, k.name as kreis\nFROM impfstoff i, kreis k\nWHERE i.zugelassen IS NOT NULL)\nMINUS\n11(SELECT impfstoff, kreis\nFROM geliefert)))\nL\u00a8osung\n1. Falsch: das keyword \u201cALL\u201d in SQL kann man nicht so verwende n. Selbst wenn es ( \u00a8ahn-\nlich wie \u201cevery\u201d in XQuery) in diesem Stil erlaubt w \u00a8are, w\u00a8urde (impfsto\ufb00) IN (impfsto\ufb00,\nkreis) nicht passen.\nHinweis: wenn dieses ALL so erlaubt w \u00a8are, w\u00a8are es in der Vorlesung sicher drangekom-\nmen.\n2. Richtig.\n3. DasMinusistfalschherum:Eserg \u00a8abeKreise,indienicht-zugelasseneImpfsto\ufb00egeliefert\nwurden. Durch das \u201cNOT IN\u201d au\u00dfen w \u00a8urde die Anfrage also (ho\ufb00entlich) alle Kreise\nergeben.\n4. Richtig. Die \u00a8au\u00dfere Projektion ist aber redundant.\n5. Falsch. Der linke Ast einer Division darf nicht einspalti g sein, und der rechte darf nicht\nmehr Attribute als der linke haben.\n6. Falsch. Die Anfrage ist auch syntaktisch kaputt. Das \u201cimp sto\ufb00 != i\u201d hat erstens keine\nKomponente (z.B. \u201ci.name?\u201d), und k \u00a8onnte auf die Aliasvariable i nicht zugreifen, da sie\nnicht in einer \u00a8au\u00dferen Anfrage de\ufb01niert wird.\n7. Richtig. Das ist der zur De\ufb01nition der Division \u00a8aquivalente Algebra-Ausdruck.\n8. Richtig. Das ist die SQL-Anfrage, die den zur De\ufb01nition de r Division \u00a8aquivalenten\nAlgebra-Ausdruck darstellt.\nBewertung (in Ilias automatisch): +1 Punkt f \u00a8ur jedes richtige Kreuz, -1 f \u00a8ur jedes falsche.\nDie Empfehlung von E-Learning/E-Klausuren f \u00a8ur Ilias ist allgemein, mehr \u201cgeschlossene Fra-\ngen\u201d, also Fragen die eine automatische Korrektur erlauben , zu verwenden.\nAufgabe 11 (Anfragen (wahlweise: B \u00a8aume als Upload) [0 Punkte])\nLadenSie hier wahlweise dieAlgebra-B \u00a8aumef\u00a8ur Aufgabe6 (\u201cAnfragen(1)\u201d)undAufgabe\n9 (\u201cAnfragen (4)\u201d) als Gra\ufb01k/Fotos hoch (beide in einer Datei ode r einzeln).\nAufgabe 12 (Open Book \u2013 Open Web \u2013 Open Documentation [4 Punkt e])\nEin externer Arzt, Dr. Sommer (bereits mit Benutzername drsommer angelegt), soll die\nTabellen, indenen dieImpfungenunddieNebenwirkungen gespeicher t sind, lesen k \u00a8onnen.\nEr soll somit keinen Zugri\ufb00 auf personenbezogene Daten haben.\nWie lautet der SQL-Befehl/die SQL-Befehle, mit dem der Datenbanka dministrator Herrn\nDr. Sommer die entsprechenden Zugri\ufb00srechte geben kann, um die Tabellen lesen, aber\nnicht\u00a8andern zu k \u00a8onnen?\nBenutzen sie eine Suchmaschine Ihrer Wahl und Dokumentation im We b (Hinweis: in den\nFolien der Datenbankvorlesung ist es nicht enthalten).\nDie Syntax ist f \u00a8ur alle Datenbanksysteme (Oracle, Postgres, ... ) dieselbe.\nL\u00a8osung\n12GRANT SELECT ON Impfungen TO drsommer;\nGRANT SELECT ON Nebenwirkungen TO drsommer;\nNicht \u201cGRANT READ\u201d, und auch nicht in einem gemeinsamen Stat ement m\u00a8oglich.\nIn einigen L \u00a8osungen wurde ein Join-View\nCREATE VIEW as drsommersview\nSELECT *\nFROM Impfungen i, Komplikationen k\nWHERE i.person = k.person\nerzeugt. Das ist grunds \u00a8atzlich keine schlechte Idee, l \u00a8ost aber das Problem nicht: Dr. Sommer\nk\u00a8onnte dann ggf. das View undalle Tabellen lesen; das Problem der Zugri\ufb00srechte bliebe\no\ufb00en, und m \u00a8usste durch\nGRANT SELECT ON drsommersview TO drsommer;\ngel\u00a8ost werden. Das Inner-Join View h \u00a8atte au\u00dferdem dem Nachteil, dass Impfungen, zu deren\nPersonen keine Nebenwirkungen gespeichert sind, darin nic ht enthalten w \u00a8aren \u2013 siehe n \u00a8achste\nAufgabe (das war so nicht beabsichtigt, passt aber sehr gut) .\nAufgabe 13 (Eine etwas kompliziertere SQL-Anfrage [6 Punkt e])\nWelche Anfrage muss Dr. Sommer (siehe auch vorhergehende Aufg abe) stellen, um f \u00a8ur\njeden Impfsto\ufb00 herauszu\ufb01nden, wieviel Prozent der Geimpften \u00a8uber Nebenwirkungen mit\nGef\u00a8ahrlichkeitsstufe 3 oder h \u00a8oher berichtet haben?\nL\u00a8osung\nSELECT impfstoff, count(distinct k.person)/count(disti nct i.person) * 100\nFROM Impfungen i\nLEFT OUTER JOIN\nKomplikationen k\nWHERE i.person = k.person and k.gefaehrlichkeit >2\nGROUP BY impfstoff\n-- man kann die Nebenwirkungen auch in einer\n-- korrelierten select-subquery zusammensuchen:\nSELECT impfstoff, (SELECT count(distinct i2.person)\nFROM Impfungen i2, Nebenwirkungen n\nWHERE i2.person=n.person\nAND i2.impfstoff = i.impfstoff)\n/count(distinct i.person) * 100 -- alle damit geimpften\nFROM Impfungen i\nGROUP BY impfstoff\n-- wenn man die Nebenwirkungen \"einfach\" in einem zweiten FR OM berechnet,\n-- muss man puzzeln, um nicht diejenigen Impfstoffe zu verli eren,\n-- bei denen keine schwerwiegenden Nebenwirkungen registr iert wurden:\nSELECT alle.impfstoff, komp.anzahl/alle.anzahl * 100\n13FROM\n(SELECT count(distinct i.person) as anzahl, impfstoff\nFROM Impfungen\nGROUP BY impfstoff\n) alle,\n((SELECT impfstoff, count(distinct i.person) as anzahl\nFROM Impfungen i, Komplikationen k\nWHERE i.person = k.person and k.gefaehrlichkeit >2\nGROUP BY impfstoff)\nUNION\n(SELECT impfstoff, 0\nFROM impfstoff\nWHERE impfstoff NOT IN (SELECT impfstoff\nFROM Impfungen i, Komplikationen k\nWHERE i.person = k.person and k.gefaehrlichkeit >2))\n) komp,\nWHERE komp.impfstoff = alle.impfstoff\nAufgabe 14 (Geht das auch in der Algebra? [2 Punkte])\nDiese Frage kann man durchaus auch beantworten, falls man die SQL -Anfrage in der vor-\nhergehenden Aufgabenicht angebenkonnte: GibteseinenAusdru ck derrelationalenAlge-\nbra, der die SQL-Anfrage aus der vorhergehenden Aufgabe ausd r\u00a8uckt? (mit Begr \u00a8undung)\nL\u00a8osung Man muss gruppieren und aggregieren (z \u00a8ahlen). Diese Operationen sind in der\nrelationalen Algebra nicht ausdr \u00a8uckbar.\n(Ausserdem muss man mit Zahlen rechnen, d.h. dividieren und m ultiplizieren, auch das ist in\nder relationalen Algebra nicht m \u00a8oglich).\nAufgabe 15 (Transaktionen 1: Single Choice [1 Punkte])\nWelche der folgenden Abk \u00a8urzungen steht f \u00a8ur die wesentlichen Eigenschaften von Trans-\naktionen in der Informatik?\n\u2013AHA+L\n/checkACID\n\u2013mRNA\n\u2013GWG\nL\u00a8osung\n\u2022ACID:Atomicity, Consistency,Isolation,Durabilitysteh tf\u00a8urdieEigenschaftenvonTrans-\naktionen.\n\u2022AHA+L: Abstand halten, Hygiene, Alltagsmasken + L \u00a8uften steht f \u00a8ur die aktuellen\nCorona-Verhaltensregeln (naja,hatansichimmerhin mitMu ltiuser-Betrieb undvirtueller\nIsolation zu tun)\n14\u2022GWG: Geldw \u00a8aschegesetz. In dessen Paragraph 46 geht es um Finanztransa ktionen.\n(GWGstehtauchf \u00a8urGesellschaftf \u00a8urWirtschaftsf \u00a8orderungundStadtentwicklungG \u00a8ottin-\ngen, aber das ist hier auch nicht gefragt).\n\u2022mRNA steht f \u00a8urmessenger ribonucleic acid , eine einzelstr \u00a8angige Ribonukleins \u00a8aure, die\ngenetische Information f \u00a8ur den Aufbau eines Proteins tr \u00a8agt und eines der Wirkungsver-\nfahren von Corona-Impfungen ist. ACID kommt dabei immerhin auch vor.\nAufgabe 16 (Transaktionen 2: Transaktionalit \u00a8at in ILIAS [4 Punkte])\nBeschreiben Sie (kurz) f \u00a8ur jede der durch das in der vorhergehenden Aufgabe gefundene\nAkronym beschriebenen Eigenschaften von Transaktionen, obun d wie sie f\u00a8ur die Klausur-\nbearbeitung durch die Studierenden bei einem Online-Klausursystem wie etwa dem ILIAS,\ndas sie gerade verwenden, relevant ist.\nL\u00a8osung Wichtig ist bei der Aufgabe, zwischen der Anwendungssemant ik (von der das\ndarunterliegenden Datenhaltungssystem nichts weiss) und eben dem Datenhaltungssystem zu\nunterscheiden. In der Anwendungssemantik \u201cKlausur\u201d beste ht eine \u201cIsolation\u201d zwischen den\nTeilnehmern, aber genau diese (jeder Teilnehmer arbeitet a usschliesslich auf der eigenen Klau-\nsur) hat zur Folge, dass transaktionale virtuelle Isolatio n (von gleichzeitigen Zugri\ufb00en auf\ndasselbe Datenitem) keine Rolle spielt, weil es diese in der Anwendung nicht geben kann.\n\u2022Atomicity: Jein. Jede einzelne Aktion \u201cSpeichern\u201d ist an si ch sowieso schon ein atomares\nINSERT oder UPDATE. Man kann argumentieren \u201cder ganze einge gebene Text/Gra\ufb01k\noder garnichts soll gespeichert werden\u201d, bzw. dass bei eine r Multiple-Choice-Aufgabe\nalle \u201cTeile\u201d der Abgabe gespeichert werden.\nHinweis: Bez \u00a8uglich der Gesamtklausur hat man es nicht mit einer \u201clange an dauernden\nTransaktion\u201d zu tun, sondern einer Interaktion, die aus ein er Folge einzelner Transak-\ntionen besteht.\n\u2022Consistency: Jein. Es gibt nur wenige echte Integrit \u00a8atsbedingungen. Das System nimmt\nauch Schrotteingaben (z.B. bei den SQL-Aufgaben) an.\nEs nimmt aber leider auch Gra\ufb01k-Uploads bei Quellcode-Aufg aben an, die dann nie\nwieder zu dekodieren sind. Das w \u00a8are ein Consistency-Aspekt, der eigentlich einen Fehler\n(=Ablehnung der Transaktion \u201cUpload\u201d ausl \u00a8osen m\u00a8usste).\nDie maximal zul \u00a8assige Gr\u00a8o\u00dfe einer Datei ist eine (willk \u00a8urliche) Integrit \u00a8atsbedingung.\nRein bez\u00a8uglich der Datenbank unter Ilias kann man argumentieren, da ss eine von der\nILIAS-Anwendungsebene \u00a8ubermittelte Speicherung sich auf eine Frage (mit einer Fra ge-\nID) beziehen muss, die es auch in der DB gibt (w \u00a8urde Programmierfehler abfangen).\nPunktezuordnung je nach Argumentation.\n\u2022Isolation: Systemseitig nicht relevant: jeder Benutzer ar beitet ja bei dieser Anwendung\nnur auf den \u201ceigenen\u201d Datenitems. Es k \u00a8onnen sich damit keine zwei Transaktionen \u201cins\nHandwerk pfuschen\u201d.\nDamit muss eine (virtuelle) Isolation von Transaktionen w \u00a8ahrend der Klausur nicht\nzus\u00a8atzlich durch eine Transaktionsverwaltung gew \u00a8ahrleistet werden.\nDas Arbeiten in zwei Browser-Tabs ist hier auch nicht releva nt (Zwei Aufgaben \u2192ver-\nschiedene Datenitems, und selbst wenn man in beiden Tabs die selbe Aufgabe bearbeiten\nw\u00a8urde, k\u00a8onnte man nicht in beiden im selben Moment eine Transaktion a usl\u00a8osen).\n(Bei der Korrektur mit Ilias sollte man allerdings sehr vors ichtig sein, was alles ge-\nspeichert wird, wenn man aufgabenweise oder teilnehmerwei se korrigiert ... schon ein\nunvorsichtiges \u201creload\u201d kann Korrekturanmerkungen l \u00a8oschen.)\n15\u2022Durability: absolut wichtig. Jede Eingabe sollte bereits s ofort abgespeichert sein, falls\nz.B.dieSoftware/VerbindungdesTeilnehmerszusammenbric htoderdieILIAS-Webservice-\nSoftware. Ausserdem sollte sie nach \u201cSpeichern\u201d sofort dau erhaft(also ambesten extern\nredundant) abgelegt sein (falls der ILIAS-Server abst \u00a8urzt), oder (z.B. nach einigen Ta-\ngen) die Festplatte stirbt.\n16", "language": "PDF", "image": "PDF", "pagetype": "PDF", "links": "PDF"}